
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Reservation Page</title>

        <!-- Latest compiled and minified CSS & JS -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
        <script src="https://code.jquery.com/jquery.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
        <link rel="stylesheet" type="text/css" href="../css/style.css"></link>
    </head>
    <body>
        <div class="container">

            <div class="text-center">
                <h1>Friend Finder</h1>
                <a href="/"><button type="button" class="btn btn-lg btn-default"><span class="glyphicon glyphicon-home"></span></button></a>
            </div>

            <div class="row">
                <div class="col-lg-12">
                    <!-- The Modal -->
                    <div id="myModal" class="modal">
                        <!-- Modal content -->
                        <div class="modal-content">
                            <span class="close">&times;</span>
                        </div>
                    </div>
                </div>

                    <!-- Survey -->
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h4 class="panel-title">Survey Questions</h4>
                    </div>
                    <div class="panel-body">

                        <form role="form">
                            <div class="row">
                                <div class="form-group col-md-4">
                                    <label for="name">Name</label>
                                    <input type="text" class="form-control" id="name">
                                </div>
                            </div>
                            <div class="col-md-6"> 
                                <div class="row">    
                                <div class="form-group" id="q1">
                                    <p>I understand people.</p>
                                    <div class="col-sm-1 text-center text-left">
                                        <p>disagree</p>
                                    </div>
                                    <div class="col-md-5">
                                        <label class="radio-inline">
                                            <input type="radio" name="q1" value="1">1
                                        </label>
                                        <label class="radio-inline">
                                            <input type="radio" name="q1" value="2">2
                                        </label>
                                        <label class="radio-inline">
                                            <input type="radio" name="q1" value="3">3
                                        </label>
                                        <label class="radio-inline">
                                            <input type="radio" name="q1" value="4">4
                                        </label>
                                        <label class="radio-inline">
                                            <input type="radio" name="q1" value="5">5
                                        </label>
                                    </div>
                                    <div class="col-sm-1 text-center text-right">
                                        <span class="survey-scale">agree</span>
                                    </div>
                                </div>
                                </div>
                                <div class="row">
                                <div class="form-group" id="q2">
                                    <p>I agree with my coworkers.<p>
                                    <div class="col-sm-1 text-center text-left">
                                        <p>disagree</p>
                                    </div>
                                    <div class="col-md-5">
                                        <label class="radio-inline">
                                            <input type="radio" name="q2" value="1">1
                                        </label>
                                        <label class="radio-inline">
                                            <input type="radio" name="q2" value="2">2
                                        </label>
                                        <label class="radio-inline">
                                            <input type="radio" name="q2" value="3">3
                                        </label>
                                        <label class="radio-inline">
                                            <input type="radio" name="q2" value="4">4
                                        </label>
                                        <label class="radio-inline">
                                            <input type="radio" name="q2" value="5">5
                                        </label>
                                    </div>
                                    <div class="col-sm-1 text-center text-right">
                                        <span class="survey-scale">agree</span>
                                    </div>
                                </div>
                                </div>
                                <div class="row">
                                <div class="form-group" id="q3">
                                    <p>I handle stress well.</p>
                                    <div class="col-sm-1 text-center text-left">
                                        <p>disagree</p>
                                    </div>
                                    <div class="col-md-5">
                                        <label class="radio-inline">
                                            <input type="radio" name="q3" value="1">1
                                        </label>
                                        <label class="radio-inline">
                                            <input type="radio" name="q3" value="2">2
                                        </label>
                                        <label class="radio-inline">
                                            <input type="radio" name="q3" value="3">3
                                        </label>
                                        <label class="radio-inline">
                                            <input type="radio" name="q3" value="4">4
                                        </label>
                                        <label class="radio-inline">
                                            <input type="radio" name="q3" value="5">5
                                        </label>
                                    </div>
                                    <div class="col-sm-1 text-center text-right">
                                        <span class="survey-scale">agree</span>
                                    </div>
                                </div>
                                </div>
                                <div class="row">
                                <div class="form-group" id="q4">
                                    <p>I thrive under pressure.</p>
                                    <div class="col-sm-1 text-center text-left">
                                        <p>disagree</p>
                                    </div>
                                    <div class="col-md-5">
                                        <label class="radio-inline">
                                            <input type="radio" name="q4" value="1">1
                                        </label>
                                        <label class="radio-inline">
                                            <input type="radio" name="q4" value="2">2
                                        </label>
                                        <label class="radio-inline">
                                            <input type="radio" name="q4" value="3">3
                                        </label>
                                        <label class="radio-inline">
                                            <input type="radio" name="q4" value="4">4
                                        </label>
                                        <label class="radio-inline">
                                            <input type="radio" name="q4" value="5">5
                                        </label>
                                    </div>
                                    <div class="col-sm-1 text-center text-right">
                                        <span class="survey-scale">agree</span>
                                    </div>
                                </div>
                                </div>
                                <div class="row">
                                <div class="form-group" id="q5">
                                    <p>I empathize with other people's problems.</p>
                                    <div class="col-sm-1 text-center text-left">
                                        <p>disagree</p>
                                    </div>
                                    <div class="col-md-5">
                                        <label class="radio-inline">
                                            <input type="radio" name="q5" value="1">1
                                        </label>
                                        <label class="radio-inline">
                                            <input type="radio" name="q5" value="2">2
                                        </label>
                                        <label class="radio-inline">
                                            <input type="radio" name="q5" value="3">3
                                        </label>
                                        <label class="radio-inline">
                                            <input type="radio" name="q5" value="4">4
                                        </label>
                                        <label class="radio-inline">
                                            <input type="radio" name="q5" value="5">5
                                        </label>
                                    </div>
                                    <div class="col-sm-1 text-center text-right">
                                        <span class="survey-scale">agree</span>
                                    </div>
                                </div>
                                </div>
                            </div>

                            <div class="col-md-6">
                                <div class="row">
                                <div class="form-group" id="q6">
                                    <p>I Understand difficult concepts.</p>
                                    <div class="col-sm-1 text-center text-left">
                                        <p>disagree</p>
                                    </div>
                                    <div class="col-md-5">
                                        <label class="radio-inline">
                                            <input type="radio" name="q6" value="1">1
                                        </label>
                                        <label class="radio-inline">
                                            <input type="radio" name="q6" value="2">2
                                        </label>
                                        <label class="radio-inline">
                                            <input type="radio" name="q6" value="3">3
                                        </label>
                                        <label class="radio-inline">
                                            <input type="radio" name="q6" value="4">4
                                        </label>
                                        <label class="radio-inline">
                                            <input type="radio" name="q6" value="5">5
                                        </label>
                                    </div>
                                    <div class="col-sm-1 text-center text-right">
                                        <span class="survey-scale">agree</span>
                                    </div>
                                </div>
                                </div>
                                <div class="row">
                                <div class="form-group" id="q7">
                                    <p>I enjoy learning new things.</p>
                                    <div class="col-sm-1 text-center text-left">
                                        <p>disagree</p>
                                    </div>
                                    <div class="col-md-5">
                                        <label class="radio-inline">
                                            <input type="radio" name="q7" value="1">1
                                        </label>
                                        <label class="radio-inline">
                                            <input type="radio" name="q7" value="2">2
                                        </label>
                                        <label class="radio-inline">
                                            <input type="radio" name="q7" value="3">3
                                        </label>
                                        <label class="radio-inline">
                                            <input type="radio" name="q7" value="4">4
                                        </label>
                                        <label class="radio-inline">
                                            <input type="radio" name="q7" value="5">5
                                        </label>
                                    </div>
                                    <div class="col-sm-1 text-center text-right">
                                        <span class="survey-scale">agree</span>
                                    </div>
                                </div>
                                </div>
                                <div class="row">
                                <div class="form-group" id="q8">
                                    <p>I am rarely late.</p>
                                    <div class="col-sm-1 text-center text-left">
                                        <p>disagree</p>
                                    </div>
                                    <div class="col-md-5">
                                        <label class="radio-inline">
                                            <input type="radio" name="q8" value="1">1
                                        </label>
                                        <label class="radio-inline">
                                            <input type="radio" name="q8" value="2">2
                                        </label>
                                        <label class="radio-inline">
                                            <input type="radio" name="q8" value="3">3
                                        </label>
                                        <label class="radio-inline">
                                            <input type="radio" name="q8" value="4">4
                                        </label>
                                        <label class="radio-inline">
                                            <input type="radio" name="q8" value="5">5
                                        </label>
                                    </div>
                                    <div class="col-sm-1 text-center text-right">
                                        <span class="survey-scale">agree</span>
                                    </div>
                                </div>
                                </div>
                                <div class="row">
                                <div class="form-group" id="q9">
                                    <p>I am rarely sick.</p>
                                    <div class="col-sm-1 text-center text-left">
                                        <p>disagree</p>
                                    </div>
                                    <div class="col-md-5">
                                        <label class="radio-inline">
                                            <input type="radio" name="q9" value="1">1
                                        </label>
                                        <label class="radio-inline">
                                            <input type="radio" name="q9" value="2">2
                                        </label>
                                        <label class="radio-inline">
                                            <input type="radio" name="q9" value="3">3
                                        </label>
                                        <label class="radio-inline">
                                            <input type="radio" name="q9" value="4">4
                                        </label>
                                        <label class="radio-inline">
                                            <input type="radio" name="q9" value="5">5
                                        </label>
                                    </div>
                                    <div class="col-sm-1 text-center text-right">
                                        <span class="survey-scale">agree</span>
                                    </div>
                                </div>
                                </div>
                                <div class="row">
                                <div class="form-group" id="q10">
                                    <p>I am a leader.</p>
                                    <div class="col-sm-1 text-center text-left">
                                        <p>disagree</p>
                                    </div>
                                    <div class="col-md-5">
                                        <label class="radio-inline">
                                            <input type="radio" name="q10" value="1">1
                                        </label>
                                        <label class="radio-inline">
                                            <input type="radio" name="q10" value="2">2
                                        </label>
                                        <label class="radio-inline">
                                            <input type="radio" name="q10" value="3">3
                                        </label>
                                        <label class="radio-inline">
                                            <input type="radio" name="q10" value="4">4
                                        </label>
                                        <label class="radio-inline">
                                            <input type="radio" name="q10" value="5">5
                                        </label>
                                    </div>
                                    <div class="col-sm-1 text-center text-right">
                                        <span class="survey-scale">agree</span>
                                    </div>
                                </div>
                                </div>
                            </div>

                            <button type="submit" class="btn btn-primary submit">Submit</button>
                        </form>
                    </div><!--Panel body-->
                </div><!--Panel-->
            </div><!--row-->
        </div><!--container-->
        <footer class="footer">
          <div class="container">
            <p><a href="/api/friends">API Friends List</a></p>
          </div>
        </footer>
    </body>
</html>
<script type="text/javascript">

    $(".submit").on("click", function(event){
        event.preventDefault();
        // grab the survey responces.
        var numbers= $("#q1 input[type='radio']:checked").val().trim() + ", " + 
                     $("#q2 input[type='radio']:checked").val().trim() + ", " + 
                     $("#q3 input[type='radio']:checked").val().trim() + ", " + 
                     $("#q4 input[type='radio']:checked").val().trim() + ", " + 
                     $("#q5 input[type='radio']:checked").val().trim() + ", " + 
                     $("#q6 input[type='radio']:checked").val().trim() + ", " + 
                     $("#q7 input[type='radio']:checked").val().trim() + ", " + 
                     $("#q8 input[type='radio']:checked").val().trim() + ", " + 
                     $("#q9 input[type='radio']:checked").val().trim() + ", " + 
                     $("#q10 input[type='radio']:checked").val().trim();
        // fill values of form
        var friendly = {
            name: $('#name').val().trim(),
            scores: numbers
        };

        console.log(friendly);

        var currentURL = window.location.origin;

        $.post(currentURL + "/api/friends", friendly,
        function(data){

            console.log("data" + data);
            // fill content for modal and display
            $(".modal").css("display", "block");
            $(".modal-content").append("<p>Great news "+ friendly.name + ", your new friend is:</p>" + "<p>" + data[0] + "</p> \n" + "<img src='"+ data[1] + "'>")
        });
        return true;
    });
    // close modal on clicking x
    var modal = document.getElementById('myModal');
    var span = document.getElementsByClassName("close")[0];
    span.onclick = function() {
        modal.style.display = "none";
        location.reload();
    }
    // close modal by clicking anywhere on screen
    window.onclick = function(event) {
        if (event.target === modal) {
            modal.style.display = "none";
            location.reload();
        }
    }
</script>